{"componentChunkName":"component---src-templates-post-template-jsx","path":"/api/managing-lists","result":{"data":{"markdownRemark":{"html":"<p>Often developers will need to manage an array of state that will be used to render UI lists or other types of data lists. I believe it is important to have a simple and easy way to manage groups of data without having to rewrite code everytime functionality is needed. Treble's <strong>SubscribeAPI</strong> has built-in methods for handling lists in an easy and efficient way.</p>\n<h4 id=\"static-keys-feature\" style=\"position:relative;\"><a href=\"#static-keys-feature\" aria-label=\"static keys feature permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Static Keys Feature</h4>\n<p>React uses keys on list items to help identify when an item has been updated or removed. (To learn more about keys click <a href=\"https://reactjs.org/docs/lists-and-keys.html\">here</a>). So static keys are essential when managing lists in React. Treble also uses keys to help it use certian list management methods like below. When using these methods it is important to set the state feature <code class=\"language-text\">keys</code> to <code class=\"language-text\">true</code>. This is a type of middleware that will automatically assign a property called <code class=\"language-text\">trebleKey</code> to each object in the array. This property can be used as a key for rendering lists.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> Store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    action<span class=\"token operator\">:</span> <span class=\"token string\">'updateTodos'</span>\n    state<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      todos<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          id<span class=\"token operator\">:</span> <span class=\"token number\">1234</span><span class=\"token punctuation\">,</span>\n          title<span class=\"token operator\">:</span> <span class=\"token string\">'Time to update the Foo'</span><span class=\"token punctuation\">,</span>\n          dueDate<span class=\"token operator\">:</span> <span class=\"token string\">'Tomorrow'</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n          id<span class=\"token operator\">:</span> <span class=\"token number\">1235</span><span class=\"token punctuation\">,</span>\n          title<span class=\"token operator\">:</span> <span class=\"token string\">'Time to update more Foo'</span><span class=\"token punctuation\">,</span>\n          dueDate<span class=\"token operator\">:</span> <span class=\"token string\">'Thursday'</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    features<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      keys<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h4 id=\"storeappend\" style=\"position:relative;\"><a href=\"#storeappend\" aria-label=\"storeappend permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Store.append</h4>\n<p>You might have an array of objects in state.  Lets say each object is a todo item. It has an id, title, and due date property.  We want to add another todo item to our todo list (array). Under normal circumstances we would need to get the entire todo list and append the new item to it and then <code class=\"language-text\">Store.update</code> the entire todo list (object array) to the store.  This works fine but doing this repetively thoughout our app can cause us to rewrite the same code over and over agian. </p>\n<p>Instead of doing this we can use the <code class=\"language-text\">Store.append</code> method to just <em>append</em> the single todo to our current store list. Method API below.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">Store<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">,</span> dispatchValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>Example:</strong> A store is created that has our todo state object with two todo list items.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> Store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    action<span class=\"token operator\">:</span> <span class=\"token string\">'updateTodos'</span>\n    state<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      todos<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          id<span class=\"token operator\">:</span> <span class=\"token number\">1234</span><span class=\"token punctuation\">,</span>\n          title<span class=\"token operator\">:</span> <span class=\"token string\">'Time to update the Foo'</span><span class=\"token punctuation\">,</span>\n          dueDate<span class=\"token operator\">:</span> <span class=\"token string\">'Tomorrow'</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n          id<span class=\"token operator\">:</span> <span class=\"token number\">1235</span><span class=\"token punctuation\">,</span>\n          title<span class=\"token operator\">:</span> <span class=\"token string\">'Time to update more Foo'</span><span class=\"token punctuation\">,</span>\n          dueDate<span class=\"token operator\">:</span> <span class=\"token string\">'Thursday'</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    features<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      keys<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>We want to <em>append</em> another todo item to this current list. A new todo item is created and attached to an object.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> newTodo <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  id<span class=\"token operator\">:</span> <span class=\"token number\">1236</span><span class=\"token punctuation\">,</span>\n  title<span class=\"token operator\">:</span> <span class=\"token string\">'Time to finish all the Foo'</span><span class=\"token punctuation\">,</span>\n  dueDate<span class=\"token operator\">:</span> <span class=\"token string\">'Friday'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>A button can be created to add this new todo to the store.  The onClick handler will set off a <code class=\"language-text\">Store.append</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Store<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'updateTodo'</span><span class=\"token punctuation\">,</span> newTodo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>Add Todo<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span></code></pre></div>\n<p>And tada the todo list is not overwritten, instead the <code class=\"language-text\">newTodo</code> has been appended to the list. If the <code class=\"language-text\">todos</code> state is outputed it would now look like this.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>todos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//new state</span>\n<span class=\"token comment\">/*[\n    {\n      id: 1234,\n      title: 'Time to update the Foo',\n      dueDate: 'Tomorrow'\n    },\n    {\n      id: 1235,\n      title: 'Time to update more Foo',\n      dueDate: 'Thursday'\n    },\n    {\n      id: 1236,\n      title: 'Time to finish all the Foo',\n      dueDate: 'Friday'\n    }\n]*/</span></code></pre></div>\n<h4 id=\"storeprepend\" style=\"position:relative;\"><a href=\"#storeprepend\" aria-label=\"storeprepend permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Store.prepend</h4>\n<p>Prepending state is similar to appending state. Instead of appending the new state item to the end of the list it will prepend it to the top. Example below.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> newTodo <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  id<span class=\"token operator\">:</span> <span class=\"token number\">1236</span><span class=\"token punctuation\">,</span>\n  title<span class=\"token operator\">:</span> <span class=\"token string\">'Time to finish all the Foo'</span><span class=\"token punctuation\">,</span>\n  dueDate<span class=\"token operator\">:</span> <span class=\"token string\">'Friday'</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Store<span class=\"token punctuation\">.</span><span class=\"token function\">prepend</span><span class=\"token punctuation\">(</span><span class=\"token string\">'updateTodos'</span><span class=\"token punctuation\">,</span> newTodo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>Add Todo<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span></code></pre></div>\n<p>The <code class=\"language-text\">newTodo</code> is now prepended to our todo list. The new output will look like below.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>todos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//new state</span>\n<span class=\"token comment\">/*[\n   {\n      id: 1236,\n      title: 'Time to finish all the Foo',\n      dueDate: 'Friday'\n    },\n    {\n      id: 1234,\n      title: 'Time to update the Foo',\n      dueDate: 'Tomorrow'\n    },\n    {\n      id: 1235,\n      title: 'Time to update more Foo',\n      dueDate: 'Thursday'\n    }\n]*/</span></code></pre></div>\n<h4 id=\"storeremove\" style=\"position:relative;\"><a href=\"#storeremove\" aria-label=\"storeremove permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Store.remove</h4>\n<p>Removing a state object from a list is super easy with the <code class=\"language-text\">Store.remove</code> method. This method is different from <code class=\"language-text\">Store.append</code> and <code class=\"language-text\">Store.prepend</code> in that the dispatched value is what will be removed from the list. Treble will take the dispatched targetValue and compare it to items in the list. When a match is found that list item will be removed. API below.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">Store<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">,</span> targetValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Example for removing a todo list item below.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//Current Todos state</span>\n<span class=\"token comment\">/*\n[\n   {\n      id: 1236,\n      title: 'Time to finish all the Foo',\n      dueDate: 'Friday'\n    },\n    {\n      id: 1234,\n      title: 'Time to update the Foo',\n      dueDate: 'Tomorrow'\n    },\n    {\n      id: 1235,\n      title: 'Time to update more Foo',\n      dueDate: 'Thursday'\n    }\n]\n*/</span>\n<span class=\"token keyword\">const</span> removeTodo <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  id<span class=\"token operator\">:</span> <span class=\"token number\">1234</span><span class=\"token punctuation\">,</span>\n  title<span class=\"token operator\">:</span> <span class=\"token string\">'Time to update the Foo'</span><span class=\"token punctuation\">,</span>\n  dueDate<span class=\"token operator\">:</span> <span class=\"token string\">'Tomorrow'</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Store<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'updateTodos'</span><span class=\"token punctuation\">,</span> removeTodo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>Remove Todo<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span></code></pre></div>\n<p>When the button is clicked it will take the <code class=\"language-text\">removeTodo</code> object and see if it can find a match in the Todos list. When it finds a match it will remove that object from the Todos list.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//New Todos list</span>\n<span class=\"token comment\">/*\n[\n   {\n      id: 1236,\n      title: 'Time to finish all the Foo',\n      dueDate: 'Friday'\n    },\n    {\n      id: 1235,\n      title: 'Time to update more Foo',\n      dueDate: 'Thursday'\n    }\n]\n*/</span></code></pre></div>\n<h4 id=\"storeorderby\" style=\"position:relative;\"><a href=\"#storeorderby\" aria-label=\"storeorderby permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Store.orderBy</h4>\n<p>Sorting state alphabetically has never been easier. The <code class=\"language-text\">Store.orderBy</code> method supports two types of sorting, <em>ascending</em> <code class=\"language-text\">&#39;asc&#39;</code> and <em>descending</em> <code class=\"language-text\">&#39;desc&#39;</code>. API below.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">Store<span class=\"token punctuation\">.</span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">,</span> targetProperty<span class=\"token punctuation\">,</span> orderType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//My favorite deserts ranked</span>\n<span class=\"token comment\">/*\n[\n    {\n      rank: 4,\n      title: 'German Chocolate'\n    },\n    {\n      rank: 2,\n      title: 'Apple Pie'\n    },\n    {\n      rank: 1,\n      title: 'Zucchini bread'\n    },\n    {\n      rank: 3,\n      title: 'Red Velvet'\n    },  \n]\n*/</span>\n\n<span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Store<span class=\"token punctuation\">.</span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span><span class=\"token string\">'updateTodos'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'title'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'asc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n  Sort list Alphabetically\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span></code></pre></div>\n<p>Sorted output below.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//My favorite deserts in alphabetical order (A-Z)</span>\n<span class=\"token comment\">/*\n[\n  {\n    rank: 2,\n    title: 'Apple Pie'\n  },\n  {\n    rank: 4,\n    title: 'German Chocolate'\n  },\n  {\n    rank: 3,\n    title: 'Red Velvet'\n  }, \n  {\n    rank: 1,\n    title: 'Zucchini bread'\n  }\n]\n*/</span></code></pre></div>\n<blockquote>\n<p>The <code class=\"language-text\">orderBy</code> is smart enough to sort in numerical order if the sort targets properties with integers.</p>\n</blockquote>\n<!-- #### Limit list length\nAlong with appending and prepending state to a list you can set a limit on the list. This will effectively remove list objects as new ones are added. The items removed will depend on the whether the option `append` or `prepend` is being used with the state dispatch. Examples below.\n\n```javascript\n//state objects with the lowest index will be removed when limit is reached.\nupdateStore('updateTodos', newTodo, dispatch,{append: true, limit: 3});\n\n//state objects with the highest index will be removed when limit is reached.\nupdateStore('updateTodos', newTodo, dispatch, {prepend: true, limit: 3})  \n``` -->","excerpt":"Often developers will need to manage an array of state that will be used to render UI lists or other types of data lists. I believe it is…","frontmatter":{"date":"2020-2-7","path":"/api/managing-lists","title":"Managing Lists","subMenu":[{"text":"Assigning Static Keys","path":"statickeysfeature"},{"text":"Store.append","path":"#storeappend"},{"text":"Store.prepend","path":"#storeprepend"},{"text":"Store.remove","path":"#storeremove"},{"text":"Store.orderBy","path":"#storeorderby"}]}}},"pageContext":{}}}